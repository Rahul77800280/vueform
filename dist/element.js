import e from"lodash";import{onMounted as t,watch as n,inject as a,toRefs as r,computed as u,getCurrentInstance as l,ref as o,provide as i,onBeforeMount as s,onBeforeUnmount as c,onBeforeUpdate as v,onUpdated as f,onUnmounted as p,reactive as d}from"composition-api";import"moment";function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t,n,a,r,u,l){try{var o=e[u](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(a,r)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var u=e.apply(t,n);function l(e){g(u,a,r,l,o,"next",e)}function o(e){g(u,a,r,l,o,"throw",e)}l(void 0)}))}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var q=function t(n){return n instanceof File?{lastModified:(a=n).lastModified,name:a.name,size:a.size,type:a.type}:n instanceof Date?n.toString():Array.isArray(n)?n.map(t):"object"===y(n)&&null!==n?e.mapValues(n,t):n;var a};var k=function(a,r,u){var l=u.form$,o=u.fire,i=u.dirt,s=u.validate,c=u.value;t((function(){n(c,(function(t,n){var a,r;(a=t,r=n,e.isEqual(q(a),q(r)))||(o("change",t,n),i&&i(),s&&l.value.shouldValidateOnChange&&s())}),{immediate:!1,deep:!0})}))},A=function(e,t,n){return{form$:a("form$")}},S=function(e,t,n){return{theme:a("theme")}},P=function(e,t,n){var a=r(e),l=a.layout,o=a.inline;return{elementLayout:u((function(){return o.value||!l.value?"ElementLayoutInline":l.value}))}},x=function(e,t,n){var a=r(e).name,o=l(),i=u((function(){var e=function(e,n){return e&&(void 0!==t.expose&&e.$options.name&&e.$options.name.match(/^[a-zA-Z\-]*Element$/)||void 0===t.expose&&e.hasOwnProperty("el$")&&"function"!=typeof e.el$)?e.el$:e.$parent?n(e.$parent,n):null};return e(o.parent.proxy,e)})),s=u((function(){return i.value&&i.value.path?i.value.path+"."+a.value:a.value})),c=u((function(){return i.value&&i.value.dataPath?i.value.dataPath+"."+a.value:a.value})),v=u((function(){return!1}));return{parent:i,path:s,dataPath:c,flat:v}},F=function(t,n,a){var l=r(t),i=l.parent,s=l.conditions,c=a.form$,v=a.path||o(null),f=o(s.value);return{available:u((function(){return!(i&&i.value&&void 0!==i.value.available&&!i.value.available)&&(!f.value||!f.value.length||!e.some(f.value,(function(e){return!c.value.$vueform.services.condition.check(e,v.value,c.value)})))}))}},V=function(t,a,l){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r(t),c=s.name,v=s.type,f=l.parent,p=l.defaultValue,d=l.dataPath,m=l.form$,h=o(void 0);m.value.isSync?h.value=e.get(m.value.model,d.value):f.value&&-1!==["object","list","multifile"].indexOf(f.value.type)&&(h.value=f.value.value[c.value]);var y=o(p.value instanceof File?p.value:e.cloneDeep(p.value)),g=u(i.value||{get:function(){var t;return void 0!==(t=m.value.isSync?e.get(m.value.model,d.value):f.value&&-1!==["object","list","multifile"].indexOf(f.value.type)?f.value.value[c.value]:y.value)?t:p.value instanceof File?p.value:e.cloneDeep(p.value)},set:function(e){if(m.value.isSync)m.value.updateModel(d.value,e);else if(f.value&&-1!==["list","multifile"].indexOf(f.value.type)){var t=f.value.value.map((function(t,n){return n==c.value?e:t}));f.value.update(t)}else f.value&&-1!==["object"].indexOf(f.value.type)?f.value.value=Object.assign({},f.value.value,j({},c.value,e)):y.value=e}}),b=u({get:function(){return g.value},set:function(e){g.value=e}});return void 0!==i.init&&!1===i.init||void 0===h.value&&(g.value=p.value instanceof File?p.value:e.cloneDeep(p.value)),n(v,(function(){g.value=p.value instanceof File?p.value:e.cloneDeep(p.value)})),{initialValue:h,internalValue:y,value:g,model:b}},D=function(t,n,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r(t),i=o.submit,s=o.formatData,c=o.formatLoad,v=o.name,f=a.form$,p=a.available,d=a.value,m=a.resetValidators,h=a.defaultValue,y=a.nullValue,g=function(e){if(l.setValue)return l.setValue(e);d.value=e},C=u((function(){return j({},v.value,d.value)})),$=u((function(){return p.value&&i.value?s.value?s.value(v.value,d.value,f.value):j({},v.value,d.value):{}})),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(t&&c.value?c.value(e,f.value):e)},w=function(e){g(e)},q=function(){g(e.cloneDeep(y.value))},k=function(){g(e.cloneDeep(h.value)),m()},A=function(){var e=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{data:C,requestData:$,load:O,update:w,clear:q,reset:k,prepare:A}},E=function(t,n,a){var l=r(t),o=l.default,i=l.name,s=a.nullValue,c=a.form$,v=a.parent;return{defaultValue:u((function(){var t;return v&&v.value&&!v.value.mounted?t=v.value.defaultValue[i.value]:!c.value.mounted&&c.value.options.default[i.value]&&(t=c.value.options.default[i.value]),void 0!==t?t instanceof File?new File([t],t.name,t):e.cloneDeep(t):void 0!==o.value?o.value instanceof File?new File([o.value],o.value.name,o.value):e.cloneDeep(o.value):e.cloneDeep(s.value)}))}},B=function(e,t,n){var a=r(e).label,l=n.form$,o=n.el$;return{hasLabel:u((function(){var e,n;return!!(l.value.options.forceLabels||a.value||o.value.slots.label||null!==(e=o.value.$slots)&&void 0!==e&&e.label||void 0===t.expose&&null!==(n=o.value.$scopedSlots)&&void 0!==n&&n.label)}))}},T=function(e,t,n){var a=r(e),l=a.columns,o=a.presets,i=n.form$,s=n.theme,c=n.hasLabel;return{columnsClasses:u((function(){var e=i.value.$vueform.config;return new i.value.$vueform.services.columns({configPresetColumns:e.usePresets,configColumns:e.columns,formPresetColumns:i.value.options.presets,formColumns:i.value.options.columns,elementPresetColumns:o.value,elementColumns:l.value},c.value,s.value.columns,e.presets).classes}))}};function M(e){return void 0===e||"string"!=typeof e?e:e.match(/^-*\d+$/)?parseInt(e,10):e.match(/^\d+\.\d+$/)?parseFloat(e):e}var z=function(n,a,d){var m={onBeforeMount:s,onMounted:t,onBeforeUpdate:v,onUpdated:f,onBeforeUnmount:c,onUnmounted:p},h=l(),y=d.form$,g=d.fire,b=function(e,t,n){var a=r(e).name,u=l(),o=n.form$;return{assignToParent:function(e,t){e.children$Array?e.children$Array.push(u.proxy):e.elements$?o.value.$set(e.elements$,a.value,u.proxy):t(e.$parent,t)},removeFromParent:function(e,t){e.children$Array?e.children$Array.splice(e.children$Array.map((function(e){return M(e.name)})).indexOf(M(a.value)),1):e.elements$?o.value.$delete(e.elements$,a.value):t(e.$parent,t)}}}(n,0,{form$:y}),C=b.assignToParent,$=b.removeFromParent,j=o(!1),O=o(!0),w=u((function(){return!1})),q=u((function(){return!1})),k=u((function(){return!1})),A=u((function(){return!1})),S=u((function(){return O.value})),P=u((function(){return h.proxy}));return i("el$",P),s((function(){C(h.proxy.$parent,C)})),t((function(){j.value=!0})),c((function(){$(h.proxy.$parent,$)})),Object.values(["onBeforeCreate","onCreated"]).forEach((function(t){g(e.lowerFirst(t.replace("on","")),P.value)})),Object.keys(m).forEach((function(t){m[t]((function(){g(e.lowerFirst(t.replace("on","")),P.value)}))})),{el$:P,isStatic:w,isFileType:q,isArrayType:A,isImageType:k,isActive:S,active:O,mounted:j,activate:function(){O.value=!0},deactivate:function(){O.value=!1}}},I=function(t,n,a){var l=r(t),o=l.name,i=l.floating,s=l.placeholder,c=l.label,v=l.fieldName,f=a.form$;return{genericName:u((function(){return v&&v.value?v.value:c&&c.value?c.value:i&&i.value?i.value:s&&s.value&&f.value.options.floatPlaceholders?s.value:e.upperFirst(o.value).replace(/_|-/g," ")}))}},L=function(t,n,a){var l=r(t),s=l.size,c=l.view,v=l.views,f=l.presets,p=n.name,d=a.available,m=a.active,h=a.form$,y=a.parent,g=o(!1),b=u((function(){return d.value&&!g.value&&m.value})),C=u((function(){var t;return s.value?t=s.value:e.each(f.value,(function(e){var n=h.value.$vueform.config.presets[e];n&&n.size&&(t=n.size)})),t||(t=y.value?y.value.Size:h.value.Size),t})),$=u((function(){return c.value?c.value:j.value[p.value]})),j=u((function(){var t=h.value.Views;return e.each(f.value,(function(e){var n=h.value.$vueform.config.presets[e];n&&n.views&&(t=Object.assign({},t,n.views))})),t=Object.assign({},t,v.value)}));return i("Size",C),i("View",$),i("Views",j),{hidden:g,visible:b,Size:C,View:$,Views:j,hide:function(){g.value=!0},show:function(){g.value=!1}}},R=function(t,n,a){var l=r(t),o=l.templates,i=l.presets,s=n.name,c=a.theme,v=a.View,f=a.form$,p=u((function(){var t={};return e.each(i?i.value:[],(function(e){var n=f.value.$vueform.config.presets[e];n&&n.templates&&(t=Object.assign({},t,n.templates))})),h(h(h({},c.value.templates),t),o?o.value:{})})),d=u((function(){return v&&v.value&&p.value["".concat(s.value,"_").concat(v.value)]?p.value["".concat(s.value,"_").concat(v.value)]:p.value[s.value]}));return{Templates:p,template:d}},U=function(t,n,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r(t);o.slots;var i=a.el$,s=["label","info","description","before","between","after"],c=["checkbox","radio","option","single-label","multiple-label","tag","no-results","no-options","after-list","before-list","placeholder","group-label","caret","clear","spinner","option","default"],v=u((function(){var t={};return s.filter((function(e){return-1!==l.slots.indexOf(e)})).forEach((function(n){var a=i.value.slots[n]||i.value.slots[e.camelCase(n)];"object"===y(a)&&(a.props&&-1===a.props.indexOf("el$")?a.props.push("el$"):a.props||(a.props=["el$"])),t[n]=a})),t})),f=u((function(){var t={};return c.filter((function(e){return-1!==l.slots.indexOf(e)})).forEach((function(n){var a=i.value.slots[n]||i.value.slots[e.camelCase(n)];"object"===y(a)&&(a.props&&-1===a.props.indexOf("el$")?a.props.push("el$"):a.props||(a.props=["el$"])),t[n]=a})),t}));return{elementSlots:v,fieldSlots:f}},N=function(e,t,n){var a=r(e).disabled,l=o(null),i=u((function(){return a.value&&!1!==l.value||!0===l.value}));return{localDisabled:l,isDisabled:i,disable:function(){l.value=!0},enable:function(){l.value=!1}}},_=function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!r.events)throw new Error("`events` option is required for useEvents");var u=o(r.events),l=o({}),i=function(e,t){l.value[e]||(l.value[e]=[]),l.value[e].push(t)},s=function(e){delete l.value[e]},c=function(){var t=arguments[0],a=[].slice.call(arguments).splice(1);e.each(l.value[t],(function(e){e.apply(void 0,O(a))})),l.value[t]&&l.value[t].length||n.emit.apply(n,O([t].concat(a)))};return e.each(u.value,(function(n){var a=t["on"+e.upperFirst(e.camelCase(n))];a&&i(n,a)})),{events:u,listeners:l,on:i,off:s,fire:c}},H=function(e,t,n){var a=n.model;return{handleInput:function(e){a.value=e.target.value}}},Z=function(t,n,a){var r=a.value,l=a.nullValue;return{empty:u((function(){return e.isEqual(r.value,l.value)||-1!==[void 0,null,""].indexOf(r.value)}))}},G=function(e,t,n){var a=r(e),l=a.floating,o=a.placeholder,i=n.form$;return{hasFloating:u((function(){return!!(l.value||o.value&&i.value.options.floatPlaceholders)}))}},J=["presets","usePresets","addClasses","prependClasses","removeClasses","replaceClasses","overrideClasses"],K=["addClass","removeClass","replaceClass","overrideClass"],Q=function(){function t(){var n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(this,t),this.options=a,this.shouldMergeTemplateClasses?(this.componentClasses=this.templateClasses,this.merge({overrideClasses:j({},this.component,this.themeClasses)})):this.componentClasses=this.templateClasses,this.merge(this.config),e.each(a.merge,(function(e){n.merge(e)})),this.merge(this.locals||this.component$.value,!0),this.config.classHelpers&&"production"!==this.config.env&&this.merge({prependClasses:j({},this.component,this.getClassHelpers(this.componentClasses,[this.component]))})}var n,a,r;return n=t,a=[{key:"classes",get:function(){var e=this;return new Proxy(this.componentClasses,{get:function(t,n){return"string"!=typeof n?t[n]:e.getDynamicClasses(t,n)}})}},{key:"config",get:function(){return this.options.config||{}}},{key:"component",get:function(){return this.options.component}},{key:"component$",get:function(){return this.options.component$}},{key:"locals",get:function(){return this.options.locals}},{key:"view",get:function(){return this.options.view}},{key:"theme",get:function(){return this.options.theme}},{key:"presets",get:function(){return this.config.presets}},{key:"templates",get:function(){return this.options.templates||{}}},{key:"template",get:function(){return this.view&&this.templates["".concat(this.component,"_").concat(this.view)]?this.templates["".concat(this.component,"_").concat(this.view)]:this.templates[this.component]||{}}},{key:"themeClasses",get:function(){return e.cloneDeep(this.toArray(this.view&&this.theme.classes["".concat(this.component,"_").concat(this.view)]?this.theme.classes["".concat(this.component,"_").concat(this.view)]:this.theme.classes[this.component]))}},{key:"templateClasses",get:function(){return e.cloneDeep(this.toArray(this.defaultClasses))}},{key:"shouldMergeTemplateClasses",get:function(){var e="function"==typeof this.template.data&&void 0!==this.template.data().merge?this.template.data().merge:this.component$.value.merge;return void 0!==e&&e}},{key:"defaultClasses",get:function(){return"function"==typeof this.template.data&&this.template.data().defaultClasses?this.template.data().defaultClasses:this.component$.value.defaultClasses}},{key:"mainClass",get:function(){var e="function"==typeof this.template.data&&this.template.data().defaultClasses?this.template.data().defaultClasses:this.component$.value.defaultClasses;return Object.keys(e)[0]}},{key:"merge",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.each(this.pick(t,a?K:J),(function(t,a){switch(a){case"addClasses":case"prependClasses":case"overrideClasses":if(!t||void 0===t[n.component])return;n.mergeComponentClasses(n.toArray(t[n.component]),a);break;case"removeClasses":case"replaceClasses":if(!t||void 0===t[n.component])return;n.mergeComponentClasses(t[n.component],a);break;case"addClass":case"removeClass":case"replaceClass":case"overrideClass":if(!t)return;"string"==typeof t||Array.isArray(t)?(Array.isArray(t)||(t=t.length>0?t.split(" "):[]),n.mergeComponentClasses(j({},n.mainClass,t),"".concat(a,"es"))):"replaceClass"===a?n.mergeComponentClasses(t,"".concat(a,"es")):e.isPlainObject(t)&&n.mergeComponentClasses(n.toArray(t),"".concat(a,"es"));break;case"presets":case"usePresets":if(!Array.isArray(t))return;e.each(t,(function(e){n.merge(n.presets[e])}))}}))}},{key:"mergeComponentClasses",value:function(t,n){var a=this;e.each(t,(function(e,t){a[n](e,[t])}))}},{key:"addClasses",value:function(t,n){var a=this,r=e.get(this.componentClasses,n.join("."));(1!=t.length||t[0])&&(e.isPlainObject(r)?e.each(t,(function(e,t){a.addClasses(e,n.concat(t))})):e.set(this.componentClasses,n.join("."),e.union(r,t)))}},{key:"prependClasses",value:function(t,n){var a=this,r=e.get(this.componentClasses,n.join("."));(1!=t.length||t[0])&&(e.isPlainObject(r)?e.each(t,(function(e,t){a.prependClasses(e,n.concat(t))})):e.set(this.componentClasses,n.join("."),e.union(t,r)))}},{key:"removeClasses",value:function(t,n){var a=this,r=e.get(this.componentClasses,n.join("."));e.isPlainObject(r)?e.each(t,(function(e,t){a.removeClasses(e,n.concat(t))})):Array.isArray(r)&&e.set(this.componentClasses,n.join("."),r.filter((function(e){return"string"!=typeof e||-1===t.indexOf(e)})))}},{key:"replaceClasses",value:function(t,n){var a=this,r=e.get(this.componentClasses,n.join("."));if(Array.isArray(t)){var u={};t.forEach((function(e){u=h(h({},u),e)})),t=u}e.isPlainObject(r)?e.each(t,(function(e,t){a.replaceClasses(e,n.concat(t))})):Array.isArray(r)&&e.set(this.componentClasses,n.join("."),r.map((function(e){return"string"!=typeof e||-1===Object.keys(t).indexOf(e)?e:t[e]})))}},{key:"overrideClasses",value:function(t,n){var a=this,r=e.get(this.componentClasses,n.join("."));e.isPlainObject(r)?e.each(t,(function(e,t){a.overrideClasses(e,n.concat(t))})):e.set(this.componentClasses,n.join("."),t)}},{key:"toArray",value:function(t){var n=this,a={};return e.each(t,(function(e,t){a[t]=n.classesToArray(e,[t])})),a}},{key:"classesToArray",value:function(t,n){var a,r=this,u=t,l=n?e.get(this.componentClasses,n.join(".")):void 0;if("string"==typeof t)u=t.length>0?t.split(" "):[];else if(e.isPlainObject(t))l&&Array.isArray(l)?u=[t]:l&&!e.isPlainObject(l)||(u={},e.each(t,(function(e,t){u[t]=r.classesToArray(e,n.concat([t]))})));else if("boolean"==typeof t||"object"===y(t)&&-1!==["ComputedRefImpl","RefImpl"].indexOf(null==t||null===(a=t.constructor)||void 0===a?void 0:a.name))throw Error("Cannot add conditional class to ".concat(this.component,": '").concat(n.join("."),"'"));return u}},{key:"getDynamicClasses",value:function(t,n,a){var r=this;a||(a=t);var u=Array.isArray(t[n])?e.flattenDeep(t[n]):t[n];return t["$".concat(n)]?e.flattenDeep(t["$".concat(n)](a,this.component$.value)):(e.isPlainObject(u)&&(u=e.cloneDeep(u),e.each(u,(function(e,n){u[n]=r.getDynamicClasses(u,n,t)}))),u)}},{key:"getClassHelpers",value:function(t,n){var a=this,r={};return e.each(t,(function(u,l){l.match(/[$]/)||(e.isPlainObject(u)?r[l]=a.getClassHelpers(t[l],n.concat([l])):r[l]=["".concat(n.join("."),".").concat(l,"--\x3e")])})),r}},{key:"pick",value:function(t,n){var a={};return t?(e.each(n,(function(e){e in t&&(a[e]=t[e])})),a):a}}],a&&$(n.prototype,a),r&&$(n,r),t}(),W=function(e,t,n){var a=t.name,r=n.form$,l=n.el$,o=n.theme,i=n.Templates,s=n.View,c=u((function(){return new Q({component:a.value,component$:l,theme:o.value,config:r.value.$vueform.config,templates:i.value,view:s.value,merge:[r.value.options,l.value]})}));return{classes:u((function(){return h({},c.value.classes)})),classesInstance:c}},X=function(e,t,n){var a=r(e).id,l=n.path;return{fieldId:u((function(){return a.value||l.value}))}},Y=function(e,t,n){return{input:o(null)}};function ee(e,t){return te.apply(this,arguments)}function te(){return(te=b(regeneratorRuntime.mark((function t(n,a){var r,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<(e.isPlainObject(n)?e.values(n):n).length)){t.next=8;break}return u=e.isPlainObject(n)?e.keys(n)[r]:r,t.next=5,a(n[u],u,n);case 5:r++,t.next=1;break;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ne=function(t,n,a){var l=r(t).rules,i=a.form$,s=a.path,c=o({dirty:!1,validated:!0}),v=o([]),f=o({}),p=d({}),m=u((function(){return l.value})),h=u((function(){return c.value.dirty})),y=u((function(){return c.value.validated})),g=u((function(){return e.some(v.value,{invalid:!0})})),C=u((function(){return e.some(v.value,{pending:!0})})),$=u((function(){return C.value})),j=u((function(){var t=[];return e.each(v.value,(function(e){e.failing&&t.push(e.message)})),t})),O=u((function(){return f.value.errors})),w=u((function(){return f.value.error||null})),q=u((function(){return null!==w.value})),k=u((function(){return m.value&&m.value.length>0&&c.value.validated&&!g.value||(!m.value||!m.value.length)&&h.value})),A=function(){var e=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.value){e.next=2;break}return e.abrupt("return");case 2:if(!1!==i.value.validation){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ee(v.value,function(){var e=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:c.value.validated=!0;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{state:c,Validators:v,messageBag:f,dirty:h,validated:y,invalid:g,pending:C,busy:$,errors:O,error:w,validationRules:m,isDanger:q,isSuccess:k,validate:A,dirt:function(){c.value.dirty=!0},clean:function(){c.value.dirty=!1},resetValidators:function(){e.each(v.value,(function(e){e.reset()})),c.value.validated=!m.value},initMessageBag:function(){f.value=new i.value.$vueform.services.messageBag(j)},initValidation:function(){m.value&&(c.value.validated=!1,p.value=new i.value.$vueform.services.validation.factory(s.value,i.value),v.value=[],e.each(p.value.makeAll(m.value),(function(e){v.value.push(e)})))}}},ae=function(e,n,a){var r=a.input,u=o(!1);return t((function(){r&&r.value&&r.value.addEventListener&&(r.value.addEventListener("focus",(function(){u.value=!0})),r.value.addEventListener("blur",(function(){u.value=!1})))})),{focused:u}},re={props:{name:{required:!0,type:[String,Number]},conditions:{required:!1,type:[Array],default:function(){return[]}},onBeforeCreate:{required:!1,type:[Function],default:null,private:!0},onCreated:{required:!1,type:[Function],default:null,private:!0},onBeforeMount:{required:!1,type:[Function],default:null,private:!0},onMounted:{required:!1,type:[Function],default:null,private:!0},onBeforeUpdate:{required:!1,type:[Function],default:null,private:!0},onUpdated:{required:!1,type:[Function],default:null,private:!0},onBeforeUnmount:{required:!1,type:[Function],default:null,private:!0},onUnmounted:{required:!1,type:[Function],default:null,private:!0}}},ue={props:{inline:{required:!1,type:[Boolean],default:!1},layout:{required:!1,type:[String,Object,Boolean],default:"ElementLayout",private:!0},addClass:{required:!1,type:[Array,Object,String],default:null},removeClass:{required:!1,type:[Array,Object],default:null},replaceClass:{required:!1,type:[Object],default:null},overrideClass:{required:!1,type:[Array,Object,String],default:null},addClasses:{required:!1,type:[Object],default:function(){return{}}},replaceClasses:{required:!1,type:[Object],default:function(){return{}}},removeClasses:{required:!1,type:[Object],default:function(){return{}}},overrideClasses:{required:!1,type:[Object],default:function(){return{}}},presets:{required:!1,type:[Array],default:function(){return[]}},view:{required:!1,type:[String],default:void 0},views:{required:!1,type:[Object],default:function(){return{}}},size:{required:!1,type:[String],default:void 0},columns:{required:!1,type:[Object,String,Number],default:null},templates:{required:!1,type:[Object],default:function(){return{}}},description:{required:!1,type:[String],default:null},info:{required:!1,type:[String],default:null},label:{required:!1,type:[String,Object,Function],default:null},before:{required:!1,type:[Object,String,Number],default:null},between:{required:!1,type:[Object,String,Number],default:null},after:{required:!1,type:[Object,String,Number],default:null},slots:{required:!1,type:[Object],default:function(){return{}}}}},le={props:{onChange:{required:!1,type:[Function],default:null,private:!0}}},oe={props:{formatData:{required:!1,type:[Function],default:null},formatLoad:{required:!1,type:[Function],default:null},submit:{required:!1,type:[Boolean],default:!0}}},ie={props:{rules:{required:!1,type:[Array,String,Object],default:null},messages:{required:!1,type:[Object],default:function(){return{}}},fieldName:{required:!1,type:[String],"@default":"name|label"}}},se=function(){return[re,ue,le,oe,ie]},ce=function(n,a,r,u){var l=o(void 0!==u.nullValue?u.nullValue:null);a.features=[A,S,P,Y,x,N,X,G,_,z,E,F,ne,V,D,Z,B,I,T,L,R,W,U,H,ae],a.slots=["label","info","description","before","between","after"];var i=function(n,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=r.deps||{},l=h(h({},r),{},{events:a.emits,slots:a.slots});return a.features.forEach((function(t){e.each(t(n,a,u,l),(function(e,t){u[t]=e}))})),!1!==a.watchValue&&k(0,0,u),!1!==a.initValidation&&t((function(){u.initMessageBag(),u.initValidation()})),h({},u)}(n,a,{deps:{nullValue:l}});return h({},i)};function ve(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.name)throw Error("The `name` attribute must be defined to create a new element");var a=t.name,r="".concat(e.upperFirst(e.camelCase(a))),u=["change","beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeUnmount","unmounted"].concat(n.emits||[]);return h({name:r,mixins:[].concat(se()).concat(n.mixins||[]),emits:u,setup:function(e,a){a.emits=u,a.name=o(r);var l=ce(e,a,0,t);a.element=l;var i=n.setup?n.setup(e,a):{};return h(h({},l),i)},props:h({type:{required:!1,type:[String],default:a},default:{required:!1,type:[String,Number],default:void 0},disabled:{required:!1,type:[Boolean],default:!1},floating:{required:!1,type:[String],default:null},id:{required:!1,type:[String],default:null},placeholder:{required:!1,type:[String],default:null}},t.props||{})},e.omit(n,["setup","mixins","emits","props"]))}export{ve as default};
