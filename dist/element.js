import e from"lodash";import{onMounted as t,inject as a,toRefs as r,computed as n,getCurrentInstance as l,ref as o,watch as i,provide as s,onBeforeMount as u,onBeforeUnmount as c,onBeforeUpdate as v,onUpdated as p,onUnmounted as f,reactive as d}from"vue";import"moment";function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a,r,n,l,o){try{var i=e[l](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(r,n)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){y(l,r,n,o,i,"next",e)}function i(e){y(l,r,n,o,i,"throw",e)}o(void 0)}))}}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(t,a,r){var n=r.deps||{};return r=m(m({},r),{},{events:a.emits,slots:a.slots}),a.features.forEach((l=>{e.each(l(t,a,n,r),((e,t)=>{n[t]=e}))})),n}!function(e){var t=function(e){var t,a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},o=l.iterator||"@@iterator",i=l.asyncIterator||"@@asyncIterator",s=l.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function c(e,t,a,r){var l=t&&t.prototype instanceof m?t:m,o=Object.create(l.prototype),i=new E(r||[]);return n(o,"_invoke",{value:x(e,a,i)}),o}function v(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p="suspendedStart",f="executing",d="completed",h={};function m(){}function y(){}function g(){}var b={};u(b,o,(function(){return this}));var C=Object.getPrototypeOf,w=C&&C(C(S([])));w&&w!==a&&r.call(w,o)&&(b=w);var O=g.prototype=m.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function $(e,t){function a(n,l,o,i){var s=v(e[n],e,l);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){a("next",e,o,i)}),(function(e){a("throw",e,o,i)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,i)}))}i(s.arg)}var l;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return l=l?l.then(n,n):n()}})}function x(e,t,a){var r=p;return function(n,l){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===n)throw l;return L()}for(a.method=n,a.arg=l;;){var o=a.delegate;if(o){var i=q(o,a);if(i){if(i===h)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===p)throw r=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=f;var s=v(e,t,a);if("normal"===s.type){if(r=a.done?d:"suspendedYield",s.arg===h)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=d,a.method="throw",a.arg=s.arg)}}}function q(e,a){var r=e.iterator[a.method];if(r===t){if(a.delegate=null,"throw"===a.method){if(e.iterator.return&&(a.method="return",a.arg=t,q(e,a),"throw"===a.method))return h;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=v(r,e.iterator,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,h;var l=n.arg;return l?l.done?(a[e.resultName]=l.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,h):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function S(e){if(e){var a=e[o];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function a(){for(;++n<e.length;)if(r.call(e,n))return a.value=e[n],a.done=!1,a;return a.value=t,a.done=!0,a};return l.next=l}}return{next:L}}function L(){return{value:t,done:!0}}return y.prototype=g,n(O,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:y,configurable:!0}),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j($.prototype),u($.prototype,i,(function(){return this})),e.AsyncIterator=$,e.async=function(t,a,r,n,l){void 0===l&&(l=Promise);var o=new $(c(t,a,r,n),l);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(O),u(O,s,"Generator"),u(O,o,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function n(r,n){return i.type="throw",i.arg=e,a.next=r,n&&(a.method="next",a.arg=t),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var o=this.tryEntries[l],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var l=n;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var o=l?l.completion:{};return o.type=e,o.arg=t,l?(this.method="next",this.next=l.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),A(a),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;A(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:S(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}});var w=function(e,t,r){return{form$:a("form$")}},O=function(e,t,r){return{theme:a("theme")}},j=function(e,t,a){var{layout:l,inline:o}=r(e);return{elementLayout:n((()=>o.value||!l.value?"ElementLayoutInline":l.value))}},$=function(e,t,a){var{name:o}=r(e),i=l(),{form$:s}=a,u=n((()=>{var e=(e,t)=>e&&(3===s.value.$vueform.vueVersion&&e.$options.name&&e.$options.name.match(/^[a-zA-Z\-]*Element$/)||2===s.value.$vueform.vueVersion&&e.hasOwnProperty("el$")&&"function"!=typeof e.el$)?e.el$:e.$parent?t(e.$parent,t):null;return e(3===s.value.$vueform.vueVersion?i.parent.proxy:i.proxy.$parent,e)})),c=n((()=>u.value&&u.value.path?u.value.path+"."+o.value:o.value)),v=n((()=>u.value&&u.value.dataPath?u.value.dataPath+"."+o.value:o.value)),p=n((()=>!1));return{parent:u,path:c,dataPath:v,flat:p}},x=function(t,a,l){var{parent:i,conditions:s}=r(t),u=l.form$,c=l.path||o(null),v=l.el$||o(void 0),p=o(s.value);return{available:n((()=>!u.value.conditions||!(i&&i.value&&void 0!==i.value.available&&!i.value.available)&&(!p.value||!p.value.length||!e.some(p.value,(e=>!u.value.$vueform.services.condition.check(e,c.value,u.value,v.value)))))),updateConditions:()=>{p.value=s.value}}},q=function(t,a,l){var s,u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{name:v,type:p}=r(t),f=l.parent,d=l.defaultValue,h=l.dataPath,m=l.form$,y=o(void 0);m.value.isSync?y.value=e.get(m.value.model,h.value):f.value&&-1!==["group","object","list","multifile"].indexOf(f.value.type)&&(y.value=f.value.value[v.value]);var g=o(d.value instanceof File?d.value:e.cloneDeep(d.value)),b=n({get:(null===(s=c.value)||void 0===s?void 0:s.get)||function(){var t;return void 0!==(t=m.value.isSync?e.get(m.value.model,h.value):f.value&&-1!==["group","object","list","multifile"].indexOf(f.value.type)?f.value.value[v.value]:g.value)?t:d.value instanceof File?d.value:e.cloneDeep(d.value)},set:(null===(u=c.value)||void 0===u?void 0:u.set)||function(e){if(m.value.isSync)m.value.updateModel(h.value,e);else if(f.value&&-1!==["list","multifile"].indexOf(f.value.type)){var t=f.value.value.map(((t,a)=>a==v.value?e:t));f.value.update(t)}else f.value&&-1!==["group","object"].indexOf(f.value.type)?f.value.value=Object.assign({},f.value.value,{[v.value]:e}):g.value=e}}),C=n({get:()=>b.value,set(e){b.value=e}});return void 0!==c.init&&!1===c.init||void 0===y.value&&(b.value=d.value instanceof File?d.value:e.cloneDeep(d.value)),i(p,(()=>{b.value=d.value instanceof File?d.value:e.cloneDeep(d.value)})),{initialValue:y,internalValue:g,value:b,model:C}},P=function(t,a,l){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{submit:i,formatData:s,formatLoad:u,name:c}=r(t),v=l.form$,p=l.available,f=l.value,d=l.resetValidators,h=l.defaultValue,m=l.nullValue,y=e=>{if(o.setValue)return o.setValue(e);f.value=e},b=n((()=>({[c.value]:f.value}))),C=n((()=>p.value&&i.value?s.value?s.value(c.value,f.value,v.value):{[c.value]:f.value}:{})),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y(t&&u.value?u.value(e,v.value):e)},O=e=>{y(e)},j=()=>{y(e.cloneDeep(m.value))},$=()=>{y(e.cloneDeep(h.value)),d()},x=function(){var e=g((function*(){}));return function(){return e.apply(this,arguments)}}();return{data:b,requestData:C,load:w,update:O,clear:j,reset:$,prepare:x}},A=function(t,a,l){var{default:o,name:i}=r(t),s=l.nullValue,u=l.form$,c=l.parent;return{defaultValue:n((()=>{var t;return c&&c.value&&!c.value.mounted?t=c.value.defaultValue[i.value]:!u.value.mounted&&u.value.options.default[i.value]&&(t=u.value.options.default[i.value]),void 0!==t?t instanceof File?new File([t],t.name,t):e.cloneDeep(t):void 0!==o.value?o.value instanceof File?new File([o.value],o.value.name,o.value):e.cloneDeep(o.value):e.cloneDeep(s.value)}))}},E=function(e,t,a){var{label:l}=r(e),o=a.form$,i=a.el$;return{hasLabel:n((()=>{var e,t;return!!(o.value.options.forceLabels||l.value||i.value.slots.label||null!==(e=i.value.$slots)&&void 0!==e&&e.label||2===o.value.$vueform.vueVersion&&null!==(t=i.value.$scopedSlots)&&void 0!==t&&t.label)}))}},S=function(t,a,l){var{columns:s,presets:u}=r(t),c=l.form$,v=l.theme,p=l.hasLabel,f=o(e.cloneDeep(s.value)),d=n((()=>{var e=c.value.$vueform.config;return new c.value.$vueform.services.columns({configPresetColumns:e.usePresets,configColumns:e.columns,formPresetColumns:c.value.options.presets,formColumns:c.value.options.columns,elementPresetColumns:u.value,elementColumns:f.value},p.value,v.value.columns,e.presets).classes}));return i(s,(t=>{f.value=e.cloneDeep(t)}),{immediate:!1,deep:!0}),{columnsClasses:d,updateColumns:t=>{f.value=e.cloneDeep(t)}}},L=function(e){return void 0===e||"string"!=typeof e?e:e.match(/^-*\d+$/)?parseInt(e,10):e.match(/^\d+\.\d+$/)?parseFloat(e):e},F=function(a,i,d){var h={onBeforeMount:u,onMounted:t,onBeforeUpdate:v,onUpdated:p,onBeforeUnmount:c,onUnmounted:f},m=l(),y=d.form$,g=d.fire,{assignToParent:b,removeFromParent:C}=function(e,t,a){var{name:n}=r(e),o=l(),i=a.form$;return{assignToParent:(e,t)=>{e.children$Array?e.children$Array.push(o.proxy):e.elements$?i.value.$set(e.elements$,n.value,o.proxy):t(e.$parent,t)},removeFromParent:(e,t)=>{e.children$Array?e.children$Array.splice(e.children$Array.map((e=>L(e.name))).indexOf(L(n.value)),1):e.elements$?i.value.$delete(e.elements$,n.value):t(e.$parent,t)}}}(a,0,{form$:y}),w=o(!1),O=o(!0),j=n((()=>!1)),$=n((()=>!1)),x=n((()=>!1)),q=n((()=>!1)),P=n((()=>O.value)),A=n((()=>m.proxy));return s("el$",A),u((()=>{b(m.proxy.$parent,b)})),t((()=>{w.value=!0})),c((()=>{C(m.proxy.$parent,C)})),Object.values(["onBeforeCreate","onCreated"]).forEach((t=>{g(e.lowerFirst(t.replace("on","")),A.value)})),Object.keys(h).forEach((t=>{h[t]((()=>{g(e.lowerFirst(t.replace("on","")),A.value)}))})),{el$:A,isStatic:j,isFileType:$,isArrayType:q,isImageType:x,isActive:P,active:O,mounted:w,activate:()=>{O.value=!0},deactivate:()=>{O.value=!1}}},V=function(t,a,l){var{name:o,floating:i,placeholder:s,label:u,fieldName:c}=r(t),v=l.form$;return{genericName:n((()=>c&&c.value?c.value:u&&u.value?u.value:i&&i.value?i.value:s&&s.value&&v.value.options.floatPlaceholders?s.value:e.upperFirst(o.value).replace(/_|-/g," ")))}},D=function(t,a,l){var{size:i,view:u,views:c,presets:v}=r(t),p=a.name,f=l.available,d=l.active,h=l.form$,m=l.parent,y=o(!1),g=n((()=>f.value&&!y.value&&d.value)),b=n((()=>{var t;return i.value?t=i.value:e.each(v.value,(e=>{var a=h.value.$vueform.config.presets[e];a&&a.size&&(t=a.size)})),t||(t=m.value?m.value.Size:h.value.Size),t})),C=n((()=>u.value?u.value:w.value[p.value])),w=n((()=>{var t=h.value.Views;return e.each(v.value,(e=>{var a=h.value.$vueform.config.presets[e];a&&a.views&&(t=Object.assign({},t,a.views))})),t=Object.assign({},t,c.value)}));return s("Size",b),s("View",C),s("Views",w),{hidden:y,visible:g,Size:b,View:C,Views:w,hide:()=>{y.value=!0},show:()=>{y.value=!1}}},k=function(t,a,l){var{templates:o,presets:i}=r(t),s=a.name,u=l.theme,c=l.View,v=l.form$,p=n((()=>{var t={};return e.each(i?i.value:[],(e=>{var a=v.value.$vueform.config.presets[e];a&&a.templates&&(t=Object.assign({},t,a.templates))})),m(m(m({},u.value.templates),t),o?o.value:{})})),f=n((()=>c&&c.value&&p.value["".concat(s.value,"_").concat(c.value)]?p.value["".concat(s.value,"_").concat(c.value)]:p.value[s.value]));return{Templates:p,template:f}},_=function(t,a,l){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(t);var i=l.el$,s=["label","info","description","before","between","after"],u=["checkbox","radio","option","single-label","multiple-label","tag","no-results","no-options","after-list","before-list","placeholder","group-label","caret","clear","spinner","option","default"],c=n((()=>{var t={};return s.filter((e=>-1!==o.slots.indexOf(e))).forEach((a=>{var r=i.value.slots[a]||i.value.slots[e.camelCase(a)];"object"==typeof r&&(r.props&&-1===r.props.indexOf("el$")?r.props.push("el$"):r.props||(r.props=["el$"])),t[a]=r})),t})),v=n((()=>{var t={};return u.filter((e=>-1!==o.slots.indexOf(e))).forEach((a=>{var r=i.value.slots[a]||i.value.slots[e.camelCase(a)];"object"==typeof r&&(r.props&&(Array.isArray(r.props)&&-1===r.props.indexOf("el$")||!Array.isArray(r.props)&&-1===Object.keys(r.props).indexOf("el$"))?r.props.push("el$"):r.props||(r.props=["el$"])),t[a]=r})),t}));return{elementSlots:c,fieldSlots:v}},T=function(e,t,a){var{disabled:l}=r(e),i=o(null),s=n((()=>l.value&&!1!==i.value||!0===i.value));return{localDisabled:i,isDisabled:s,disable:()=>{i.value=!0},enable:()=>{i.value=!1}}},B=function(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n.events)throw new Error("`events` option is required for useEvents");var l=o(n.events),i=o({}),s=(e,t)=>{i.value[e]||(i.value[e]=[]),i.value[e].push(t)},u=e=>{delete i.value[e]},c=function(){var t=arguments[0],r=[].slice.call(arguments).splice(1);e.each(i.value[t],(e=>{e(...r)})),i.value[t]&&i.value[t].length||a.emit(...[t].concat(r))};return e.each(l.value,(a=>{var r=t["on"+e.upperFirst(e.camelCase(a))];r&&s(a,r)})),{events:l,listeners:i,on:s,off:u,fire:c}},N=function(e,t,a){var r=a.model;return{handleInput:e=>{r.value=e.target.value}}},M=function(t,a,r){var l=r.value,o=r.nullValue;return{empty:n((()=>e.isEqual(l.value,o.value)||-1!==[void 0,null,""].indexOf(l.value)))}},z=function(e,t,a){var{floating:l,placeholder:o}=r(e),i=a.form$;return{hasFloating:n((()=>!!(l.value||o.value&&i.value.options.floatPlaceholders)&&!1!==l.value))}},I=["presets","usePresets","addClasses","prependClasses","removeClasses","replaceClasses","overrideClasses"],U=["addClass","removeClass","replaceClass","overrideClass"];class G{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.shouldMergeTemplateClasses?(this.componentClasses=this.templateClasses,this.merge({overrideClasses:{[this.component]:this.themeClasses}})):this.componentClasses=this.templateClasses,this.merge(this.config),e.each(t.merge,(e=>{this.merge(e)})),this.merge(this.locals||this.component$.value,!0),this.config.classHelpers&&"production"!==this.config.env&&this.merge({prependClasses:{[this.component]:this.getClassHelpers(this.componentClasses,[this.component])}})}get classes(){return new Proxy(this.componentClasses,{get:(e,t)=>"string"!=typeof t?e[t]:this.getDynamicClasses(e,t)})}get config(){return this.options.config||{}}get component(){return this.options.component}get component$(){return this.options.component$}get locals(){return this.options.locals}get view(){return this.options.view}get theme(){return this.options.theme}get presets(){return this.config.presets}get templates(){return this.options.templates||{}}get template(){return this.view&&this.templates["".concat(this.component,"_").concat(this.view)]?this.templates["".concat(this.component,"_").concat(this.view)]:this.templates[this.component]||{}}get themeClasses(){return e.cloneDeep(this.toArray(this.view&&this.theme.classes["".concat(this.component,"_").concat(this.view)]?this.theme.classes["".concat(this.component,"_").concat(this.view)]:this.theme.classes[this.component]))}get templateClasses(){return e.cloneDeep(this.toArray(this.defaultClasses))}get shouldMergeTemplateClasses(){var e="function"==typeof this.template.data&&void 0!==this.template.data().merge?this.template.data().merge:this.component$.value.merge;return void 0!==e&&e}get defaultClasses(){return"function"==typeof this.template.data&&this.template.data().defaultClasses?this.template.data().defaultClasses:this.component$.value.defaultClasses}get mainClass(){var e="function"==typeof this.template.data&&this.template.data().defaultClasses?this.template.data().defaultClasses:this.component$.value.defaultClasses;return Object.keys(e)[0]}merge(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.each(this.pick(t,a?U:I),((t,a)=>{switch(a){case"addClasses":case"prependClasses":case"overrideClasses":if(!t||void 0===t[this.component])return;this.mergeComponentClasses(this.toArray(t[this.component]),a);break;case"removeClasses":case"replaceClasses":if(!t||void 0===t[this.component])return;this.mergeComponentClasses(t[this.component],a);break;case"addClass":case"removeClass":case"replaceClass":case"overrideClass":if(!t)return;"string"==typeof t||Array.isArray(t)?(Array.isArray(t)||(t=t.length>0?t.split(" "):[]),this.mergeComponentClasses({[this.mainClass]:t},"".concat(a,"es"))):"replaceClass"===a?this.mergeComponentClasses(t,"".concat(a,"es")):e.isPlainObject(t)&&this.mergeComponentClasses(this.toArray(t),"".concat(a,"es"));break;case"presets":case"usePresets":if(!Array.isArray(t))return;e.each(t,(e=>{this.merge(this.presets[e])}))}}))}mergeComponentClasses(t,a){e.each(t,((e,t)=>{this[a](e,[t])}))}addClasses(t,a){var r=e.get(this.componentClasses,a.join("."));(1!=t.length||t[0])&&(e.isPlainObject(r)?e.each(t,((e,t)=>{this.addClasses(e,a.concat(t))})):e.set(this.componentClasses,a.join("."),e.union(r,t)))}prependClasses(t,a){var r=e.get(this.componentClasses,a.join("."));(1!=t.length||t[0])&&(e.isPlainObject(r)?e.each(t,((e,t)=>{this.prependClasses(e,a.concat(t))})):e.set(this.componentClasses,a.join("."),e.union(t,r)))}removeClasses(t,a){var r=e.get(this.componentClasses,a.join("."));e.isPlainObject(r)?e.each(t,((e,t)=>{this.removeClasses(e,a.concat(t))})):Array.isArray(r)&&e.set(this.componentClasses,a.join("."),r.filter((e=>"string"!=typeof e||-1===t.indexOf(e))))}replaceClasses(t,a){var r=e.get(this.componentClasses,a.join("."));if(Array.isArray(t)){var n={};t.forEach((e=>{n=m(m({},n),e)})),t=n}e.isPlainObject(r)?e.each(t,((e,t)=>{this.replaceClasses(e,a.concat(t))})):Array.isArray(r)&&e.set(this.componentClasses,a.join("."),r.map((e=>"string"!=typeof e||-1===Object.keys(t).indexOf(e)?e:t[e])))}overrideClasses(t,a){var r=e.get(this.componentClasses,a.join("."));e.isPlainObject(r)?e.each(t,((e,t)=>{this.overrideClasses(e,a.concat(t))})):e.set(this.componentClasses,a.join("."),t)}toArray(t){var a={};return e.each(t,((e,t)=>{a[t]=this.classesToArray(e,[t])})),a}classesToArray(t,a){var r,n=t,l=a?e.get(this.componentClasses,a.join(".")):void 0;if("string"==typeof t)n=t.length>0?t.split(" "):[];else if(e.isPlainObject(t))l&&Array.isArray(l)?n=[t]:l&&!e.isPlainObject(l)||(n={},e.each(t,((e,t)=>{n[t]=this.classesToArray(e,a.concat([t]))})));else if("boolean"==typeof t||"object"==typeof t&&-1!==["ComputedRefImpl","RefImpl"].indexOf(null==t||null===(r=t.constructor)||void 0===r?void 0:r.name))throw Error("Cannot add conditional class to ".concat(this.component,": '").concat(a.join("."),"'"));return n}getDynamicClasses(t,a,r){r||(r=t);var n=Array.isArray(t[a])?e.flattenDeep(t[a]):t[a];return t["$".concat(a)]?e.flattenDeep(t["$".concat(a)](r,this.component$.value)):(e.isPlainObject(n)&&(n=e.cloneDeep(n),e.each(n,((e,a)=>{n[a]=this.getDynamicClasses(n,a,t)}))),n)}getClassHelpers(t,a){var r={};return e.each(t,((n,l)=>{l.match(/[$]/)||(e.isPlainObject(n)?r[l]=this.getClassHelpers(t[l],a.concat([l])):r[l]=["".concat(a.join("."),".").concat(l,"--\x3e")])})),r}pick(t,a){var r={};return t?(e.each(a,(e=>{e in t&&(r[e]=t[e])})),r):r}}var R=function(e,t,a){var r=t.name,l=a.form$,o=a.el$,i=a.theme,s=a.Templates,u=a.View,c=n((()=>new G({component:r.value,component$:o,theme:i.value,config:l.value.$vueform.config,templates:s.value,view:u.value,merge:[l.value.options,o.value]})));return{classes:n((()=>m({},c.value.classes))),classesInstance:c}},H=function(e,t,a){var{id:l}=r(e),o=a.path;return{fieldId:n((()=>l.value||o.value))}},W=function(e,t,a){return{input:o(null)}};function Y(){return(Y=g((function*(t,a){for(var r=0;r<(e.isPlainObject(t)?e.values(t):t).length;r++){var n=e.isPlainObject(t)?e.keys(t)[r]:r;yield a(t[n],n,t)}}))).apply(this,arguments)}var Z=function(t,a,l){var{rules:i}=r(t),s=l.form$,u=l.path,c=o({dirty:!1,validated:!0}),v=o([]),p=o({}),f=d({}),h=n((()=>i.value)),m=n((()=>c.value.dirty)),y=n((()=>c.value.validated)),b=n((()=>e.some(v.value,{invalid:!0}))),C=n((()=>e.some(v.value,{pending:!0}))),w=n((()=>C.value)),O=n((()=>{var t=[];return e.each(v.value,(e=>{e.failing&&t.push(e.message)})),t})),j=n((()=>p.value.errors)),$=n((()=>p.value.error||null)),x=n((()=>null!==$.value)),q=n((()=>h.value&&h.value.length>0&&c.value.validated&&!b.value||(!h.value||!h.value.length)&&m.value)),P=function(){var e=g((function*(){h.value&&!1!==s.value.validation&&(yield function(e,t){return Y.apply(this,arguments)}(v.value,function(){var e=g((function*(e){yield e.validate()}));return function(t){return e.apply(this,arguments)}}()),c.value.validated=!0)}));return function(){return e.apply(this,arguments)}}(),A=()=>{h.value&&(c.value.validated=!1,f.value=new s.value.$vueform.services.validation.factory(u.value,s.value),v.value=[],e.each(f.value.makeAll(h.value),(e=>{v.value.push(e)})))};return{state:c,Validators:v,messageBag:p,dirty:m,validated:y,invalid:b,pending:C,busy:w,errors:j,error:$,validationRules:h,isDanger:x,isSuccess:q,validate:P,dirt:()=>{c.value.dirty=!0},clean:()=>{c.value.dirty=!1},resetValidators:()=>{e.each(v.value,(e=>{e.reset()})),c.value.validated=!h.value},initMessageBag:()=>{p.value=new s.value.$vueform.services.messageBag(O)},initValidation:A,reinitValidation:()=>{A()}}},J=function(e,a,r){var n=r.input,l=o(!1);return t((()=>{n&&n.value&&n.value.addEventListener&&(n.value.addEventListener("focus",(()=>{l.value=!0})),n.value.addEventListener("blur",(()=>{l.value=!1})))})),{focused:l}},K=function t(a){return a instanceof File?{lastModified:(r=a).lastModified,name:r.name,size:r.size,type:r.type}:a instanceof Date?a.toString():Array.isArray(a)?a.map(t):"object"==typeof a&&null!==a?e.mapValues(a,t):a;var r};var Q=function(t,a,r){var n=r.form$,l=r.el$,o=r.fire,s=r.dirt,u=r.validate,c=r.value;return{initWatcher:()=>{i(c,((t,a)=>{var r,i;(r=t,i=a,e.isEqual(K(r),K(i)))||(o("change",t,a,l.value),s&&s(),u&&n.value.shouldValidateOnChange&&u())}),{immediate:!1,deep:!0})}}},X={props:{name:{required:!0,type:[String,Number]},conditions:{required:!1,type:[Array],default:()=>[]},onBeforeCreate:{required:!1,type:[Function],default:null,private:!0},onCreated:{required:!1,type:[Function],default:null,private:!0},onBeforeMount:{required:!1,type:[Function],default:null,private:!0},onMounted:{required:!1,type:[Function],default:null,private:!0},onBeforeUpdate:{required:!1,type:[Function],default:null,private:!0},onUpdated:{required:!1,type:[Function],default:null,private:!0},onBeforeUnmount:{required:!1,type:[Function],default:null,private:!0},onUnmounted:{required:!1,type:[Function],default:null,private:!0}}},ee={props:{inline:{required:!1,type:[Boolean],default:!1},layout:{required:!1,type:[String,Object,Boolean],default:"ElementLayout",private:!0},addClass:{required:!1,type:[Array,Object,String],default:null},removeClass:{required:!1,type:[Array,Object],default:null},replaceClass:{required:!1,type:[Object],default:null},overrideClass:{required:!1,type:[Array,Object,String],default:null},addClasses:{required:!1,type:[Object],default:()=>({})},replaceClasses:{required:!1,type:[Object],default:()=>({})},removeClasses:{required:!1,type:[Object],default:()=>({})},overrideClasses:{required:!1,type:[Object],default:()=>({})},presets:{required:!1,type:[Array],default:()=>[]},view:{required:!1,type:[String],default:void 0},views:{required:!1,type:[Object],default:()=>({})},size:{required:!1,type:[String],default:void 0},columns:{required:!1,type:[Object,String,Number],default:null},templates:{required:!1,type:[Object],default:()=>({})},description:{required:!1,type:[String],default:null},info:{required:!1,type:[String],default:null},infoPosition:{required:!1,type:[String],default:"right"},label:{required:!1,type:[String,Object,Function],default:null},before:{required:!1,type:[Object,String,Number],default:null},between:{required:!1,type:[Object,String,Number],default:null},after:{required:!1,type:[Object,String,Number],default:null},slots:{required:!1,type:[Object],default:()=>({})}}},te={props:{onChange:{required:!1,type:[Function],default:null,private:!0}}},ae={props:{formatData:{required:!1,type:[Function],default:null},formatLoad:{required:!1,type:[Function],default:null},submit:{required:!1,type:[Boolean],default:!0}}},re={props:{rules:{required:!1,type:[Array,String,Object],default:null},messages:{required:!1,type:[Object],default:()=>({})},fieldName:{required:!1,type:[String],"@default":"name|label"}}},ne=function(){return[X,ee,te,ae,re]},le=function(e,a,r){var n=o(void 0!==r.nullValue?r.nullValue:null);a.features=[w,O,j,W,$,T,H,z,B,F,A,x,Z,q,P,M,E,V,S,D,k,R,_,N,J,Q],a.slots=["label","info","description","before","between","after"];var l=function(e,a){var r=C(e,a,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return t((()=>{r.initWatcher&&r.initWatcher(),r.initMessageBag&&r.initMessageBag(),r.initValidation&&r.initValidation()})),m({},r)}(e,a,{deps:{nullValue:n}});return m({},l)};function oe(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.name)throw Error("The `name` attribute must be defined to create a new element");var r=t.name,n="".concat(e.upperFirst(e.camelCase(r))),l=["change","beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeUnmount","unmounted"].concat(a.emits||[]);return m({name:n,mixins:[].concat(ne()).concat(a.mixins||[]),components:a.components||{},emits:l,setup(e,r){var i=m({},r);i.emits=l,i.name=o(n);var s=le(e,i,t);i.element=s;var u=a.setup?a.setup(e,i):{};return m(m({},s),u)},props:m({type:{required:!1,type:[String],default:r},default:{required:!1,type:[String,Number],default:void 0},disabled:{required:!1,type:[Boolean],default:!1},floating:{required:!1,type:[String],default:null},id:{required:!1,type:[String],default:null},placeholder:{required:!1,type:[String],default:null}},t.props||{})},e.omit(a,["setup","mixins","emits","props"]))}export{oe as default};
